#!/bin/bash

CONFIG_DIR="$HOME/.config/lf"

[ -d "$CONFIG_DIR" ] || mkdir -vp "$CONFIG_DIR"

echo "./lfrc + bookmarks -> $CONFIG_DIR/lfrc"
cat "./lfrc" <(cd ../bookmarks && ./build lf) > "$CONFIG_DIR/lfrc"

if command -v ueberzug >/dev/null; then
    echo "installing with ueberzug support..."
    cp -v "./clear_img.sh" "$CONFIG_DIR/"
    cp -v "./draw_img.sh" "$CONFIG_DIR/"
    cp -v "./previewer.sh" "$CONFIG_DIR/"
else
    echo "installing without ueberzug support..."
    cp -v "./clear_img-plain.sh" "$CONFIG_DIR/clear_img.sh"
    cp -v "./previewer-plain.sh" "$CONFIG_DIR/previewer.sh"
fi

chmod +x "$CONFIG_DIR/"*.sh

